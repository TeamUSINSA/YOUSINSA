<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="mapper.user">
	<insert id="insertUser" parameterType="user">
		insert into user
		(user_id,password,name,phone,email,birth)
		values(#{userId},#{password},#{name},#{phoneNum},#{email},#{birth})
	</insert>

	<select id="selectUser" parameterType="String" resultType="user">
		select * from user where user_id=#{userId}
	</select>


	<select id="isDuplicateId" parameterType="String"
		resultType="boolean">
		SELECT COUNT(*) > 0 FROM User WHERE user_id = #{userId}
	</select>

	<update id="updateSingleField" parameterType="map">
		UPDATE user
		SET
		<choose>
			<when test="column == 'name'"> name = #{value} </when>
			<when test="column == 'phone'"> phone = #{value} </when>
			<when test="column == 'email'"> email = #{value} </when>
			<when test="column == 'birth'"> birth = #{value} </when>
		</choose>
		WHERE user_id = #{userId}
	</update>

	<update id="withdrawUser" parameterType="user">
		update user
		set deleted =
		#{deleted}, withdrawal_reason =
		#{withdrawalReason},withdrawal_detail=#{withdrawalDetail}
		where user_id
		= #{userId}
	</update>
	<select id="loginUser" parameterType="map"
		resultType="dto.user.User">
		SELECT user_id, name
		FROM User
		WHERE user_id = #{userId} AND
		password = #{password}
	</select>


</mapper>